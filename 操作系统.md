## 操作系统

### 进程与线程：

1. 进程：资源分配的基本单位。进程控制块（PCB）描述进程的基本信息和运行状态。

2. 线程：独立调度的基本单位

3. 区别：

   1. 调度：线程是独立调度的基本单位。不同为一个进程中，线程切换会引起进程切换。
   2. 开销：
      1. 进程：创建或销毁时，系统需要分配或回收资源。切换时，需要保存**寄存器、虚拟内存**、内核状态、内核资源
      2. 线程：不切换虚拟内存，但保存寄存器和栈
   3. 通信：线程：全局变量、直接内存。进程：IPC

   

### 线程同步

- 互斥量：采用互斥对象机制，只有拥有互斥对象的线程才能访问。互斥对象只有一个
- 信号量：容许同一时刻多个线程访问同一资源，但是有最大上限
- 事件（信号）：通知操作的方式来保持多线程同步

### 进程通信IPC

- 管道：普通管道、流管道、命名管道
- 系统IPC：消息队列、信号量、共享内存
- SOCKET

### 死锁

- 互斥
- 请求保持
- 不可剥夺
- 循环等待

### 虚拟内存

- **作为虚拟地址和物理地址之间的映射**；
- 每个进程都可以有**从0开始的地址空间**；
- 虚拟内存可以做到连续交由操作系统完成**内存碎片合并**；
- **解决内存有限问题**

**分页**

- 虚拟地址=页号+偏移，
- 由MMU维护页表作为虚拟页框到物理页框的映射

**缺页中断**

- MMU检测到缺页中断，操作系统会进行对内存的页面调度算法

**内存保护**

- 由MMU与页表控制，进程访问不属于它的虚拟内存会发生段错误

**段页式**

- 地址空间划分成多个拥有独立地址空间的段，每个段上的地址空间划分成大小相同的页
- 既拥有<u>分段系统的共享和保护</u>，又拥有<u>分页系统的虚拟内存</u>

### **页面置换算法**

- 最佳OPT：理论上的算法：所选择的被换出的页面将是最长时间内不再被访问，通常可以保证获得最低的缺页率。
- 最近最久没使用LRU：通常用链表实现
- 先进先出FIFO：会导致缺页率升高
- 第二次机会：FIFO升级版，增加了一个标志为是否使用
- 时钟Clock：第二次机会的升级版，使用环形链表+一个指针指向最老的页面

### 进程调度算法

**批处理系统**：保证吞吐量和周转时间

- 先来先服务FCFS：可能会先执行长作业，短作业等待时间过长
- 短作业优先SJF：长作业可能会被饿死
- 最短剩余时间优先SRTN：短作业的抢占式版本

**交互式系统**：保证快速响应

- 时间片轮转：按照FCFS原则排成一个队列，每次调度队首执行时间片，时间用完，进程停止并移到队尾
- 优先级调度：随着时间推移增加等待进程得优先级
- 多级反馈队列：
  - 时间片轮转+优先级调度
  - 有多个队列，每个的时间片大小不同如1，2，4，8。进程没执行完，会被移到后面的队列。
  - 每个队列优先级不同，只有前面的队列为空，后面的队列才会执行